/*! Copyright Aaron Marasco 2013, MIT License  */
!function(a){"use strict";function b(){}function c(a){return"function"==typeof a}function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a,b){if(Array.prototype.forEach)return Array.prototype.forEach.call(a,b);for(var c=0;c<a.length;c++)b(a[c])}function f(a,b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);var c=-1;return e(a,function(a){return c++,a===b?c:void 0}),-1}function g(a,b){if(b){if(a.classList)return a.classList.add(b);var c=a.className.split(" ");-1!==f(c,b)&&c.push(b),a.className=c.join(" ")}}function h(a,b){if(b){if(a.classList)return a.classList.remove(b);var c=a.className.split(" "),d=f(c,b);a.className=c.splice(d,1).join(" ")}}function i(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):(a.attachEvent("on"+b,c),void 0)}var j={},k={};j.defaults={start:b,stop:b,drag:b,dropEffect:"all",dragImage:b,effectAllowed:"all",dragClass:"",dragData:b};var l=function(a,b){function f(){return c(b.dragClass)?b.dragClass(a)||"":b.dragClass||""}function k(){return c(b.dragData)?b.dragData(a):b.dragData}function m(c){return b.drag.call(a,c)}function n(c){g(a,f()),c.dataTransfer.effectAllowed=b.dropEffect;var d=k(),e="text/plain";return"string"!=typeof d&&(d=d.content,e=d.contentType),d&&c.dataTransfer.setData(e,d),b.start.call(a,c)}function o(c){return h(a,f()),b.stop.call(a,c)}return a.length?(e(a,function(a){l(a,b)}),a):(b=d(j.defaults,b||{}),i(a,"dragstart",n),i(a,"dragend",o),i(a,"drag",m),a.draggable=!0,void 0)};k.defaults={enter:b,leave:b,drop:b,over:b,hoverClass:""};var m=function(a,b){function c(c){return c.preventDefault(),c.stopPropagation(),h(a,b.hoverClass),b.drop.call(a,c)}function f(c){return c.preventDefault(),g(a,b.hoverClass),b.enter.call(a)}function j(c){return c.preventDefault(),b.over.call(a,c)}function l(c){return h(a,b.hoverClass),b.leave.call(a,c)}return b=d(k.defaults,b),a.length?e(a,function(a){m(a,b)}):(i(a,"drop",c),i(a,"dragenter",f),i(a,"dragleave",l),i(a,"dragover",j),void 0)};a.DragAndDrop={initDrag:l,initDrop:m},a.jQuery&&(a.jQuery.fn.draggable=function(a){return this.each(function(){l(this,a)})},a.jQuery.fn.droppable=function(a){return this.each(function(){m(this,a)})})}(window);